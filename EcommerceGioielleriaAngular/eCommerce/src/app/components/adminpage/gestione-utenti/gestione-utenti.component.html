<div class="container">
    <div>
        <div class="accordion accordion-flush" id="accordionUtenti">
            <div class="accordion-item pb-2">
                <h2 class="accordion-header">
                    <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#flush-collapseUtenti"
                        aria-expanded="false"
                        aria-controls="flush-collapseUtenti"
                        (click)="caricaUtenti()"
                    >
                        Visualizza Lista Utenti
                    </button>
                </h2>
                <div
                    id="flush-collapseUtenti"
                    class="accordion-collapse collapse"
                    data-bs-parent="#accordionUtenti"
                >
                    <div class="accordion-body">
                        <div class="container-fluid">
                            <div class="d-flex justify-content-center">
                                <input
                                    type="text"
                                    class="searchUtenteInput"
                                    [(ngModel)]="ricercaUtente"
                                    (input)="effettuaRicerca()"
                                    placeholder="Cerca utente per nome e/o cognome"
                                />
                            </div>
                            <div
                                class="row utenteCard"
                                *ngFor="let utente of utenti"
                            >
                                <div class="col-11">
                                    <div class="row">
                                        <div class="col-12 col-md-6 col-lg-3">
                                            <p>Nome: {{ utente.nome }}</p>
                                        </div>
                                        <div class="col-12 col-md-6 col-lg-3">
                                            <p>Cognome: {{ utente.cognome }}</p>
                                        </div>
                                        <div class="col-12 col-md-6 col-lg-3">
                                            <p>
                                                Data di Nascita:
                                                {{ utente.dataNascita }}
                                            </p>
                                        </div>
                                        <div class="col-12 col-md-6 col-lg-3">
                                            <p>Email: {{ utente.email }}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-1 text-center">
                                    <div class="buttonTooltip">
                                        <button
                                            type="button"
                                            (click)="openToast(utente.id ?? '')"
                                        >
                                            <img
                                                class="changeUser"
                                                src="assets/immagini/icons/x-lg.svg"
                                                alt="X Icon"
                                            />
                                        </button>
                                        <div
                                            class="myTooltip button px-2 pt-1 bg-danger-subtle"
                                            id="eliminaTooltip"
                                        >
                                            Elimina
                                        </div>
                                    </div>
                                </div>
                                <div
                                    class="d-flex justify-content-center justify-content-md-end"
                                >
                                    <ngb-toast
                                        class="eliminaToast"
                                        *ngIf="utenteToasts[utente.id ?? '']"
                                        [autohide]="false"
                                    >
                                        <div class="toast-header text-danger">
                                            <h6 class="me-auto fw-bold">
                                                Attenzione
                                            </h6>
                                            <button
                                                type="button"
                                                class="btn-close"
                                                (click)="
                                                    closeToast(utente.id ?? '')
                                                "
                                            ></button>
                                        </div>
                                        <div class="toast-body">
                                            Sei sicuro di voler eliminare questo
                                            indirizzo?
                                            <div>
                                                <button
                                                    type="button"
                                                    class="btn button bg-danger-subtle"
                                                    (click)="
                                                        eliminaUtente(
                                                            utente.email
                                                        )
                                                    "
                                                >
                                                    Elimina
                                                </button>
                                            </div>
                                        </div>
                                    </ngb-toast>
                                </div>
                            </div>
                            <div class="d-flex justify-content-center pb-5">
                                <button
                                    type="button"
                                    class="btn button paginationButton"
                                    *ngFor="let page of pages"
                                    (click)="selectPage(page)"
                                    [ngClass]="{
                                        activePageButton:
                                            page === paginaSelezionata
                                    }"
                                >
                                    {{ page }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
